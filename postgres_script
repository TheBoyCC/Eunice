--
-- PostgreSQL database dump
--

-- Dumped from database version 13.2 (Debian 13.2-1.pgdg100+1)
-- Dumped by pg_dump version 13.2

-- Started on 2021-06-14 13:37:24 GMT

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 237 (class 1255 OID 16608)
-- Name: update_task_action(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_task_action() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
	ActionName text;
BEGIN
	SELECT "ActionName" FROM public."Actions" WHERE "ActionID" = NEW.ActionID;

	IF (ActionName = 'Unpay Cheque') THEN
		UPDATE public."Tasks" SET "DebitBalance" = NEW.Amount, "Notes" = NEW.ChequeNumber + ' - ' + NEW.Reason
		WHERE TaskID = NEW.TaskID;

	ELSEIF (ActionName = 'Telephone') THEN
		UPDATE public."Tasks" SET "Notes" = NEW.Reason
		WHERE TaskID = NEW.TaskID;	
	END IF;
END;
$$;


ALTER FUNCTION public.update_task_action() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 210 (class 1259 OID 16787)
-- Name: AccountTypes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."AccountTypes" (
    "Code" text NOT NULL,
    "Description" text NOT NULL,
    "TypeStatus" boolean DEFAULT true NOT NULL,
    "DateModified" timestamp(6) without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."AccountTypes" OWNER TO postgres;

--
-- TOC entry 211 (class 1259 OID 16795)
-- Name: Accounts; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Accounts" (
    "ReferCode" text,
    "MarketSegment" text,
    "EWL" integer,
    "DateOpened" timestamp(6) without time zone,
    "DateClosed" timestamp(6) without time zone,
    "CustomerID" integer NOT NULL,
    "Currency" text,
    "Code" integer,
    "BranchCode" text NOT NULL,
    "BranchAccount" text,
    "AccountType" text,
    "AccountStatus" boolean,
    "AccountNumber" text NOT NULL,
    "DateModified" timestamp(6) without time zone DEFAULT now()
);


ALTER TABLE public."Accounts" OWNER TO postgres;

--
-- TOC entry 213 (class 1259 OID 16804)
-- Name: Actions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Actions" (
    "ActionID" integer NOT NULL,
    "ActionName" text NOT NULL,
    "ActionStatus" boolean DEFAULT true NOT NULL,
    "DateModified" timestamp(6) without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."Actions" OWNER TO postgres;

--
-- TOC entry 200 (class 1259 OID 16767)
-- Name: Actions_ActionID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."Actions_ActionID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."Actions_ActionID_seq" OWNER TO postgres;

--
-- TOC entry 3136 (class 0 OID 0)
-- Dependencies: 200
-- Name: Actions_ActionID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."Actions_ActionID_seq" OWNED BY public."Actions"."ActionID";


--
-- TOC entry 212 (class 1259 OID 16802)
-- Name: Actions_ActionID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Actions" ALTER COLUMN "ActionID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Actions_ActionID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 215 (class 1259 OID 16814)
-- Name: ActivityLogs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."ActivityLogs" (
    "ActivityLogID" integer NOT NULL,
    "ActivityDate" timestamp(6) without time zone NOT NULL,
    "Username" text NOT NULL,
    "Activity" text NOT NULL,
    "Description" text NOT NULL
);


ALTER TABLE public."ActivityLogs" OWNER TO postgres;

--
-- TOC entry 201 (class 1259 OID 16769)
-- Name: ActivityLogs_ActivityLogID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."ActivityLogs_ActivityLogID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."ActivityLogs_ActivityLogID_seq" OWNER TO postgres;

--
-- TOC entry 3137 (class 0 OID 0)
-- Dependencies: 201
-- Name: ActivityLogs_ActivityLogID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."ActivityLogs_ActivityLogID_seq" OWNED BY public."ActivityLogs"."ActivityLogID";


--
-- TOC entry 214 (class 1259 OID 16812)
-- Name: ActivityLogs_ActivityLogID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."ActivityLogs" ALTER COLUMN "ActivityLogID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."ActivityLogs_ActivityLogID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 217 (class 1259 OID 16822)
-- Name: BrainsReports; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."BrainsReports" (
    "ReportID" integer NOT NULL,
    "Username" text NOT NULL,
    "DateUploaded" timestamp(6) without time zone DEFAULT now() NOT NULL,
    "ReportStatus" boolean DEFAULT true
);


ALTER TABLE public."BrainsReports" OWNER TO postgres;

--
-- TOC entry 202 (class 1259 OID 16771)
-- Name: BrainsReports_ReportID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."BrainsReports_ReportID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."BrainsReports_ReportID_seq" OWNER TO postgres;

--
-- TOC entry 3138 (class 0 OID 0)
-- Dependencies: 202
-- Name: BrainsReports_ReportID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."BrainsReports_ReportID_seq" OWNED BY public."BrainsReports"."ReportID";


--
-- TOC entry 216 (class 1259 OID 16820)
-- Name: BrainsReports_ReportID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."BrainsReports" ALTER COLUMN "ReportID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."BrainsReports_ReportID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 218 (class 1259 OID 16830)
-- Name: Branches; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Branches" (
    "BranchCode" text NOT NULL,
    "BranchName" text NOT NULL,
    "BranchStatus" boolean DEFAULT true NOT NULL,
    "Physical" boolean DEFAULT true NOT NULL,
    "DateModified" timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."Branches" OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 16840)
-- Name: Currencies; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Currencies" (
    "CurrencyID" integer NOT NULL,
    "LongName" text NOT NULL,
    "ShortName" text NOT NULL,
    "DateModified" timestamp(6) without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."Currencies" OWNER TO postgres;

--
-- TOC entry 203 (class 1259 OID 16773)
-- Name: Currencies_CurrencyID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."Currencies_CurrencyID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."Currencies_CurrencyID_seq" OWNER TO postgres;

--
-- TOC entry 3139 (class 0 OID 0)
-- Dependencies: 203
-- Name: Currencies_CurrencyID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."Currencies_CurrencyID_seq" OWNED BY public."Currencies"."CurrencyID";


--
-- TOC entry 219 (class 1259 OID 16838)
-- Name: Currencies_CurrencyID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Currencies" ALTER COLUMN "CurrencyID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Currencies_CurrencyID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 222 (class 1259 OID 16849)
-- Name: Customers; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Customers" (
    "CustomerID" integer NOT NULL,
    "BranchAccount" text,
    "ShortName" text NOT NULL,
    "LongName" text NOT NULL,
    "Gender" text,
    "MaritalStatus" text,
    "DateOfBirth" timestamp(6) without time zone,
    "PhoneNumber1" text,
    "PhoneNumber2" text,
    "Email" text,
    "IDNumber" text,
    "Employer" text,
    "Occupation" text,
    "Country" text,
    "PlaceOfBirth" text,
    "ResidentialAddress" text,
    "PostalAddress" text,
    "Town" text,
    "ZipCode" text,
    "OtherInformation" text,
    "CustomerStatus" boolean DEFAULT true NOT NULL,
    "Migrated" boolean DEFAULT false,
    "DateModified" timestamp(6) without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."Customers" OWNER TO postgres;

--
-- TOC entry 204 (class 1259 OID 16775)
-- Name: Customers_CustomerID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."Customers_CustomerID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."Customers_CustomerID_seq" OWNER TO postgres;

--
-- TOC entry 3140 (class 0 OID 0)
-- Dependencies: 204
-- Name: Customers_CustomerID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."Customers_CustomerID_seq" OWNED BY public."Customers"."CustomerID";


--
-- TOC entry 221 (class 1259 OID 16847)
-- Name: Customers_CustomerID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Customers" ALTER COLUMN "CustomerID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Customers_CustomerID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 224 (class 1259 OID 16860)
-- Name: DailyExcess; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."DailyExcess" (
    "ExcessID" integer NOT NULL,
    "Initials" text,
    "Username" text,
    "BranchCode" text,
    "AccountNumber" text,
    "AccountType" integer,
    "CustomerName" text,
    "LocalBalance" money,
    "CurrencyBalance" money,
    "PaidDate" timestamp(6) without time zone,
    "TransCode" text,
    "CurrecnyNum" text,
    "LocalAmount" text,
    "CurrencyAmount" text,
    "MarketSegment" text,
    "Unit" text,
    "ReferCode" text,
    "OriginatingBranch" integer,
    "Narration" text,
    "TerminalNumber" integer,
    "TerminalSequence" integer,
    "Comment" text,
    "ExcessStatus" boolean DEFAULT false NOT NULL,
    "ReportDate" timestamp(6) without time zone,
    "Reviewed" boolean DEFAULT false NOT NULL,
    "DateModified" timestamp(6) without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."DailyExcess" OWNER TO postgres;

--
-- TOC entry 205 (class 1259 OID 16777)
-- Name: DailyExcess_ExcessID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."DailyExcess_ExcessID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."DailyExcess_ExcessID_seq" OWNER TO postgres;

--
-- TOC entry 3141 (class 0 OID 0)
-- Dependencies: 205
-- Name: DailyExcess_ExcessID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."DailyExcess_ExcessID_seq" OWNED BY public."DailyExcess"."ExcessID";


--
-- TOC entry 223 (class 1259 OID 16858)
-- Name: DailyExcess_ExcessID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."DailyExcess" ALTER COLUMN "ExcessID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."DailyExcess_ExcessID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 16871)
-- Name: Departments; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Departments" (
    "DeptID" integer NOT NULL,
    "DeptName" text NOT NULL,
    "DateModified" timestamp(6) without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."Departments" OWNER TO postgres;

--
-- TOC entry 206 (class 1259 OID 16779)
-- Name: Departments_DeptID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."Departments_DeptID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."Departments_DeptID_seq" OWNER TO postgres;

--
-- TOC entry 3142 (class 0 OID 0)
-- Dependencies: 206
-- Name: Departments_DeptID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."Departments_DeptID_seq" OWNED BY public."Departments"."DeptID";


--
-- TOC entry 225 (class 1259 OID 16869)
-- Name: Departments_DeptID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Departments" ALTER COLUMN "DeptID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Departments_DeptID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 236 (class 1259 OID 17042)
-- Name: ManagerSignatures; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."ManagerSignatures" (
    "SignatureID" integer NOT NULL,
    "Signature" text NOT NULL,
    "Username" text NOT NULL,
    "SignatureStatus" boolean DEFAULT true NOT NULL,
    "DateModified" timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."ManagerSignatures" OWNER TO postgres;

--
-- TOC entry 235 (class 1259 OID 17040)
-- Name: ManagerSignatures_SignatureID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."ManagerSignatures" ALTER COLUMN "SignatureID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."ManagerSignatures_SignatureID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 227 (class 1259 OID 16878)
-- Name: MarketSegments; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."MarketSegments" (
    "Code" text NOT NULL,
    "Description" text NOT NULL,
    "SegmentStatus" boolean DEFAULT true NOT NULL,
    "DateModified" timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."MarketSegments" OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16887)
-- Name: NewCustomers; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."NewCustomers" (
    "NewCustomerID" integer NOT NULL,
    "DateCreated" timestamp(6) without time zone NOT NULL,
    "CustomerID" integer NOT NULL,
    "FirstName" text NOT NULL,
    "LastName" text NOT NULL,
    "BranchCode" text NOT NULL,
    "AccountNumber" text,
    "Controller" text,
    "Authoriser" text,
    "Authorised" boolean DEFAULT false NOT NULL,
    "Comments" text,
    "NewCustomerStatus" text,
    "DateModified" timestamp(6) without time zone
);


ALTER TABLE public."NewCustomers" OWNER TO postgres;

--
-- TOC entry 207 (class 1259 OID 16781)
-- Name: NewCustomers_NewCustomerID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."NewCustomers_NewCustomerID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."NewCustomers_NewCustomerID_seq" OWNER TO postgres;

--
-- TOC entry 3143 (class 0 OID 0)
-- Dependencies: 207
-- Name: NewCustomers_NewCustomerID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."NewCustomers_NewCustomerID_seq" OWNED BY public."NewCustomers"."NewCustomerID";


--
-- TOC entry 228 (class 1259 OID 16885)
-- Name: NewCustomers_NewCustomerID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."NewCustomers" ALTER COLUMN "NewCustomerID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."NewCustomers_NewCustomerID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 231 (class 1259 OID 16896)
-- Name: Roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Roles" (
    "RoleID" integer NOT NULL,
    "RoleName" text NOT NULL,
    "DateModified" timestamp(6) without time zone DEFAULT now()
);


ALTER TABLE public."Roles" OWNER TO postgres;

--
-- TOC entry 208 (class 1259 OID 16783)
-- Name: Roles_RoleID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."Roles_RoleID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."Roles_RoleID_seq" OWNER TO postgres;

--
-- TOC entry 3144 (class 0 OID 0)
-- Dependencies: 208
-- Name: Roles_RoleID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."Roles_RoleID_seq" OWNED BY public."Roles"."RoleID";


--
-- TOC entry 230 (class 1259 OID 16894)
-- Name: Roles_RoleID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Roles" ALTER COLUMN "RoleID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Roles_RoleID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 233 (class 1259 OID 16905)
-- Name: Tasks; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Tasks" (
    "TaskID" integer NOT NULL,
    "ActionID" integer NOT NULL,
    "CustomerID" integer NOT NULL,
    "CurrencyID" integer,
    "DebitBalance" money,
    "DebitIR" text,
    "ChequeNumber" text,
    "Amount" money,
    "Reason" text,
    "Notes" text,
    "ApplicableDate" timestamp(6) without time zone,
    "DueDate" timestamp(6) without time zone,
    "TaskStatus" text NOT NULL,
    "Controller" text NOT NULL,
    "Completor" text,
    "DateCompleted" timestamp(6) without time zone,
    "Archived" boolean DEFAULT false NOT NULL,
    "DateModified" timestamp(6) without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public."Tasks" OWNER TO postgres;

--
-- TOC entry 209 (class 1259 OID 16785)
-- Name: Tasks_TaskID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."Tasks_TaskID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER TABLE public."Tasks_TaskID_seq" OWNER TO postgres;

--
-- TOC entry 3145 (class 0 OID 0)
-- Dependencies: 209
-- Name: Tasks_TaskID_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."Tasks_TaskID_seq" OWNED BY public."Tasks"."TaskID";


--
-- TOC entry 232 (class 1259 OID 16903)
-- Name: Tasks_TaskID_seq1; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Tasks" ALTER COLUMN "TaskID" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Tasks_TaskID_seq1"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 234 (class 1259 OID 16913)
-- Name: Users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Users" (
    "Username" text NOT NULL,
    "FirstName" text NOT NULL,
    "LastName" text NOT NULL,
    "Email" text,
    "RoleName" text NOT NULL,
    "DeptID" integer NOT NULL,
    "Locked" boolean DEFAULT false,
    "UserStatus" boolean DEFAULT true,
    "LoginAttempt" integer DEFAULT 0,
    "DateModified" timestamp(6) without time zone DEFAULT now()
);


ALTER TABLE public."Users" OWNER TO postgres;

--
-- TOC entry 2951 (class 2606 OID 17062)
-- Name: AccountTypes AccountTypes_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."AccountTypes"
    ADD CONSTRAINT "AccountTypes_pkey" PRIMARY KEY ("Code");


--
-- TOC entry 2953 (class 2606 OID 17103)
-- Name: Accounts Accounts_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Accounts"
    ADD CONSTRAINT "Accounts_pkey" PRIMARY KEY ("CustomerID", "BranchCode", "AccountNumber");


--
-- TOC entry 2955 (class 2606 OID 16928)
-- Name: Actions Actions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Actions"
    ADD CONSTRAINT "Actions_pkey" PRIMARY KEY ("ActionID");


--
-- TOC entry 2957 (class 2606 OID 16930)
-- Name: ActivityLogs ActivityLogs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."ActivityLogs"
    ADD CONSTRAINT "ActivityLogs_pkey" PRIMARY KEY ("ActivityLogID");


--
-- TOC entry 2959 (class 2606 OID 16932)
-- Name: BrainsReports BrainsReports_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."BrainsReports"
    ADD CONSTRAINT "BrainsReports_pkey" PRIMARY KEY ("ReportID");


--
-- TOC entry 2961 (class 2606 OID 17073)
-- Name: Branches Branches_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Branches"
    ADD CONSTRAINT "Branches_pkey" PRIMARY KEY ("BranchCode");


--
-- TOC entry 2963 (class 2606 OID 16936)
-- Name: Currencies Currencies_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Currencies"
    ADD CONSTRAINT "Currencies_pkey" PRIMARY KEY ("CurrencyID");


--
-- TOC entry 2965 (class 2606 OID 16938)
-- Name: Customers Customers_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Customers"
    ADD CONSTRAINT "Customers_pkey" PRIMARY KEY ("CustomerID");


--
-- TOC entry 2967 (class 2606 OID 16940)
-- Name: DailyExcess DailyExcess_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."DailyExcess"
    ADD CONSTRAINT "DailyExcess_pkey" PRIMARY KEY ("ExcessID");


--
-- TOC entry 2969 (class 2606 OID 16942)
-- Name: Departments Departments_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Departments"
    ADD CONSTRAINT "Departments_pkey" PRIMARY KEY ("DeptID");


--
-- TOC entry 2981 (class 2606 OID 17051)
-- Name: ManagerSignatures ManagerSignatures_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."ManagerSignatures"
    ADD CONSTRAINT "ManagerSignatures_pkey" PRIMARY KEY ("SignatureID");


--
-- TOC entry 2971 (class 2606 OID 17082)
-- Name: MarketSegments MarketSegments_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."MarketSegments"
    ADD CONSTRAINT "MarketSegments_pkey" PRIMARY KEY ("Code");


--
-- TOC entry 2973 (class 2606 OID 16946)
-- Name: NewCustomers NewCustomers_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."NewCustomers"
    ADD CONSTRAINT "NewCustomers_pkey" PRIMARY KEY ("NewCustomerID");


--
-- TOC entry 2975 (class 2606 OID 16948)
-- Name: Roles Roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Roles"
    ADD CONSTRAINT "Roles_pkey" PRIMARY KEY ("RoleName");


--
-- TOC entry 2977 (class 2606 OID 16950)
-- Name: Tasks Tasks_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Tasks"
    ADD CONSTRAINT "Tasks_pkey" PRIMARY KEY ("TaskID");


--
-- TOC entry 2979 (class 2606 OID 16952)
-- Name: Users Users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Users"
    ADD CONSTRAINT "Users_pkey" PRIMARY KEY ("Username");


--
-- TOC entry 3000 (class 2620 OID 17028)
-- Name: Tasks update_task_action; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_task_action AFTER INSERT ON public."Tasks" FOR EACH ROW EXECUTE FUNCTION public.update_task_action();


--
-- TOC entry 2985 (class 2606 OID 17135)
-- Name: Accounts Accounts_AccountType_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Accounts"
    ADD CONSTRAINT "Accounts_AccountType_fkey" FOREIGN KEY ("AccountType") REFERENCES public."AccountTypes"("Code") NOT VALID;


--
-- TOC entry 2983 (class 2606 OID 17125)
-- Name: Accounts Accounts_BranchCode_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Accounts"
    ADD CONSTRAINT "Accounts_BranchCode_fkey" FOREIGN KEY ("BranchCode") REFERENCES public."Branches"("BranchCode") NOT VALID;


--
-- TOC entry 2982 (class 2606 OID 16963)
-- Name: Accounts Accounts_CustomerID_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Accounts"
    ADD CONSTRAINT "Accounts_CustomerID_fkey" FOREIGN KEY ("CustomerID") REFERENCES public."Customers"("CustomerID");


--
-- TOC entry 2984 (class 2606 OID 17130)
-- Name: Accounts Accounts_MarketSegment_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Accounts"
    ADD CONSTRAINT "Accounts_MarketSegment_fkey" FOREIGN KEY ("MarketSegment") REFERENCES public."MarketSegments"("Code") NOT VALID;


--
-- TOC entry 2987 (class 2606 OID 16978)
-- Name: BrainsReports BrainsReports_Username_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."BrainsReports"
    ADD CONSTRAINT "BrainsReports_Username_fkey" FOREIGN KEY ("Username") REFERENCES public."Users"("Username");


--
-- TOC entry 2986 (class 2606 OID 16973)
-- Name: ActivityLogs FK_Users_ActivityLogs_Username; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."ActivityLogs"
    ADD CONSTRAINT "FK_Users_ActivityLogs_Username" FOREIGN KEY ("Username") REFERENCES public."Users"("Username");


--
-- TOC entry 2997 (class 2606 OID 17029)
-- Name: Users FK_Users_Departments_DeptID; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Users"
    ADD CONSTRAINT "FK_Users_Departments_DeptID" FOREIGN KEY ("DeptID") REFERENCES public."Departments"("DeptID");


--
-- TOC entry 2998 (class 2606 OID 17034)
-- Name: Users FK_Users_Roles_RoleName; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Users"
    ADD CONSTRAINT "FK_Users_Roles_RoleName" FOREIGN KEY ("RoleName") REFERENCES public."Roles"("RoleName");


--
-- TOC entry 2999 (class 2606 OID 17052)
-- Name: ManagerSignatures ManagerSignatures_Username_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."ManagerSignatures"
    ADD CONSTRAINT "ManagerSignatures_Username_fkey" FOREIGN KEY ("Username") REFERENCES public."Users"("Username");


--
-- TOC entry 2988 (class 2606 OID 16983)
-- Name: NewCustomers NewCustomers_Authoriser_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."NewCustomers"
    ADD CONSTRAINT "NewCustomers_Authoriser_fkey" FOREIGN KEY ("Authoriser") REFERENCES public."Users"("Username");


--
-- TOC entry 2991 (class 2606 OID 17097)
-- Name: NewCustomers NewCustomers_BranchCode_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."NewCustomers"
    ADD CONSTRAINT "NewCustomers_BranchCode_fkey" FOREIGN KEY ("BranchCode") REFERENCES public."Branches"("BranchCode") NOT VALID;


--
-- TOC entry 2989 (class 2606 OID 16993)
-- Name: NewCustomers NewCustomers_Controller_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."NewCustomers"
    ADD CONSTRAINT "NewCustomers_Controller_fkey" FOREIGN KEY ("Controller") REFERENCES public."Users"("Username");


--
-- TOC entry 2990 (class 2606 OID 16998)
-- Name: NewCustomers NewCustomers_CustomerID_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."NewCustomers"
    ADD CONSTRAINT "NewCustomers_CustomerID_fkey" FOREIGN KEY ("CustomerID") REFERENCES public."Customers"("CustomerID");


--
-- TOC entry 2992 (class 2606 OID 17003)
-- Name: Tasks Tasks_ActionID_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Tasks"
    ADD CONSTRAINT "Tasks_ActionID_fkey" FOREIGN KEY ("ActionID") REFERENCES public."Actions"("ActionID");


--
-- TOC entry 2993 (class 2606 OID 17008)
-- Name: Tasks Tasks_Completor_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Tasks"
    ADD CONSTRAINT "Tasks_Completor_fkey" FOREIGN KEY ("Completor") REFERENCES public."Users"("Username");


--
-- TOC entry 2994 (class 2606 OID 17013)
-- Name: Tasks Tasks_Controller_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Tasks"
    ADD CONSTRAINT "Tasks_Controller_fkey" FOREIGN KEY ("Controller") REFERENCES public."Users"("Username");


--
-- TOC entry 2995 (class 2606 OID 17018)
-- Name: Tasks Tasks_CurrencyID_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Tasks"
    ADD CONSTRAINT "Tasks_CurrencyID_fkey" FOREIGN KEY ("CurrencyID") REFERENCES public."Currencies"("CurrencyID");


--
-- TOC entry 2996 (class 2606 OID 17023)
-- Name: Tasks Tasks_CustomerID_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Tasks"
    ADD CONSTRAINT "Tasks_CustomerID_fkey" FOREIGN KEY ("CustomerID") REFERENCES public."Customers"("CustomerID");


-- Completed on 2021-06-14 13:37:25 GMT

--
-- PostgreSQL database dump complete
--

